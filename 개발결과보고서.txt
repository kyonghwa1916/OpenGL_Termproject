================================================================================
                    컴퓨터 그래픽스 최종 프로젝트 개발 결과 보고서
                          Night Street Driving Simulator
================================================================================

1. 프로젝트 소개
================================================================================

프로젝트명: Night Street Driving Simulator (야간 도로 주행 시뮬레이터)

본 프로젝트는 OpenGL을 활용하여 야간 도로에서 자동차를 운전하는 3D 시뮬레이터를
구현한 것입니다. 실시간 조명 시스템, 텍스처 매핑, 3D 모델링 기술을 결합하여
몰입감 있는 주행 경험을 제공합니다.

주요 특징:
- 동적 조명 시스템 (Point Light 기반 가로등 조명)
- 실시간 3D 자동차 제어 (전진/후진/회전)
- 물리 기반 렌더링 (Phong Shading)
- 텍스처 매핑된 도로 환경
- 키 동시 입력 지원


2. 프로젝트 구조 설명
================================================================================

2.1 데이터 구조
--------------------------------------------------------------------------------

[전역 상태 변수]
- float carX, carZ, carAngle: 자동차의 위치 및 회전 상태
- bool specialKeyStates[256]: 키보드 입력 상태 추적 배열

[렌더링 객체]
- GLuint bgVAO, bgVBO: 배경(도로/인도) 버텍스 데이터
- GLuint carVAO, carVBO: 자동차 모델 버텍스 데이터
- GLuint lightVAO, lightVBO: 가로등 모델 버텍스 데이터

[쉐이더 유니폼]
- modelLoc, viewLoc, projLoc: MVP 행렬
- useTextureLoc: 텍스처 사용 여부
- isLightSourceLoc: 발광체 여부
- viewPosLoc: 카메라 위치 (반사광 계산용)

[텍스처 리소스]
- roadTextureID: 도로 텍스처
- dirtTextureID: 인도 텍스처


2.2 정점 데이터 구조
--------------------------------------------------------------------------------

각 정점은 11개의 float 값으로 구성:
- Position (3): X, Y, Z 좌표
- Color (3): R, G, B 색상
- TexCoord (2): U, V 텍스처 좌표
- Normal (3): 법선 벡터 (조명 계산용)


2.3 주요 함수 구조
--------------------------------------------------------------------------------

[초기화 함수]
- make_Shaders(): 버텍스/프래그먼트 쉐이더 컴파일 및 링크
- initBuffer(): 배경(도로/인도) 지오메트리 생성
- initCubeObj(): 3D 객체(자동차/가로등) 생성
- LoadTexture(): 이미지 파일에서 텍스처 로드

[렌더링 함수]
- drawScene(): 메인 렌더링 루프
  - 카메라 설정
  - 동적 조명 계산 (자동차 주변 4개 가로등만 활성화)
  - 배경, 가로등, 자동차 순차 렌더링

[입력 처리 함수]
- updateCar(): 키 상태에 따라 자동차 위치/각도 업데이트
- SpecialKeyboard/Up(): 화살표 키 입력 처리
- Timer(): 16ms 주기 업데이트 (60 FPS)

[수학 헬퍼 함수]
- setIdentityMatrix(): 단위 행렬 생성
- makePerspectiveMatrix(): 원근 투영 행렬 생성
- setTranslationMatrix(): 이동 행렬 생성
- setRotationYMatrix(): Y축 회전 행렬 생성
- multiplyMatrix(): 4x4 행렬 곱셈


2.4 좌표계 시스템
--------------------------------------------------------------------------------

[월드 좌표계]
- X축: 좌(-) / 우(+)
- Y축: 아래(-) / 위(+)
- Z축: 앞(-) / 뒤(+)

[자동차 로컬 좌표계]
- 자동차 정면: -Z 방향
- 회전: Y축 기준 회전 (carAngle)
- 이동: 로컬 좌표계 기준 전방 벡터 계산


3. 프로젝트 진행 사항
================================================================================

[1단계] 프로젝트 초기 설정 (커밋: a550d0a)
- OpenGL 프로젝트 환경 구축
- 기본 쉐이더 파일 작성
- GLEW, freeGLUT 라이브러리 설정

[2단계] 기본 환경 구현 (커밋: d32cd90)
- 도로 및 인도 지오메트리 생성
- 텍스처 매핑 시스템 구현
- 가로등 모델링 (기둥, 팔, 전구)

[3단계] 조명 시스템 구현 (커밋: ac2c85f)
- Phong Shading 모델 적용
- Point Light 기반 가로등 조명
- 동적 조명 시스템 (자동차 위치 기반 4개 활성화)
- 발광체 렌더링 (isLightSource 플래그)

[4단계] 자동차 제어 시스템 (커밋: 3bc6e40)
- 자동차 3D 모델링 (차체, 캐빈, 후드, 바퀴, 유리창, 헤드라이트)
- Y축 기준 회전 기능
- 로컬 좌표계 기반 이동
- 제자리 회전 구현

[5단계] 바퀴 개선 및 입력 시스템 (커밋: 8efa821)
- 박스 바퀴 → 원통(실린더) 바퀴로 변경
- 16개 세그먼트로 매끄러운 원형 구현
- 키 동시 입력 지원 (타이머 기반)
- 일정한 프레임레이트 유지 (60 FPS)

[6단계] 카메라 시스템 개선 (커밋: db99854)
- 카메라 거리 조정 (자동차 전체 보기)
- 3인칭 시점 최적화


4. 팀원간 작업 내용
================================================================================

본 프로젝트는 2인 공동 작업으로 진행되었습니다.

[팀원 A - 렌더링 및 모델링]
- 쉐이더 프로그래밍 (버텍스/프래그먼트 쉐이더)
- 3D 모델링 (자동차, 가로등)
- 텍스처 시스템 구현
- 조명 시스템 설계 및 구현

[팀원 B - 물리 및 제어]
- 자동차 물리 시스템 (이동, 회전)
- 입력 처리 시스템
- 카메라 제어
- 타이머 기반 업데이트 루프

[공동 작업]
- 프로젝트 구조 설계
- Git을 통한 버전 관리
- 디버깅 및 최적화
- 통합 테스트


5. 개발 결과 소개
================================================================================

5.1 주요 기능
--------------------------------------------------------------------------------

[1] 실시간 3D 자동차 주행
- 전진/후진 시 자동차가 바라보는 방향으로 이동
- 부드러운 회전 (제자리 회전)
- 키 동시 입력 지원 (전진하면서 회전 가능)

[2] 동적 조명 시스템
- 총 15쌍(30개)의 가로등 배치
- 자동차 주변 4개 가로등만 실시간 활성화 (성능 최적화)
- Point Light 기반 감쇠 효과
- 따뜻한 노란빛 조명 (1.0, 0.9, 0.6 RGB)

[3] 상세한 3D 모델
- 자동차: 차체, 캐빈, 후드, 원형 바퀴 4개, 유리창, 헤드라이트
- 가로등: 기둥, 팔, 전구 (발광 효과)
- 텍스처 매핑된 도로 및 인도

[4] 물리 기반 렌더링
- Phong Shading (Ambient + Diffuse + Specular)
- 법선 벡터 기반 정확한 조명 계산
- 거리 기반 감쇠 (Attenuation)


5.2 기술적 성과
--------------------------------------------------------------------------------

- VAO/VBO를 활용한 효율적인 지오메트리 관리
- 쉐이더 프로그래밍을 통한 GPU 가속 렌더링
- 동적 메모리 관리 (std::vector)
- 람다 함수를 활용한 모듈화된 코드
- 타이머 기반 일정한 프레임레이트 (60 FPS)


5.3 렌더링 통계
--------------------------------------------------------------------------------

- 배경 정점: 18개 (도로 6 + 인도 12)
- 가로등 정점: 108개 × 30개 = 3,240개
- 자동차 정점: 984개 (원통 바퀴 포함)
- 총 정점 수: 약 4,242개
- 활성 조명: 4개 (실시간 전환)


6. 명령어 소개
================================================================================

6.1 키보드 명령어
--------------------------------------------------------------------------------

[자동차 제어]
↑ (UP)      : 전진 (자동차가 바라보는 방향으로)
↓ (DOWN)    : 후진 (자동차가 바라보는 반대 방향으로)
← (LEFT)    : 좌회전 (제자리에서 Y축 기준 회전)
→ (RIGHT)   : 우회전 (제자리에서 Y축 기준 회전)

[시스템 제어]
Q 또는 ESC  : 프로그램 종료

[조작 팁]
- 여러 키를 동시에 누를 수 있습니다
  예: UP + LEFT = 전진하면서 좌회전
      UP + RIGHT = 전진하면서 우회전
- 키를 누르고 있으면 연속 입력됩니다


6.2 파라미터 설정
--------------------------------------------------------------------------------

[이동 속도]
- speed = 0.3 (단위/프레임)
- 약 18 단위/초

[회전 속도]
- rotSpeed = 0.02 (라디안/프레임)
- 약 1.2 라디안/초 (약 69도/초)

[카메라]
- 거리: 8.0 단위
- 높이: 1.5 단위
- 시야각: 45도 (π/4)


7. 프로젝트 개발 소감 및 후기
================================================================================

7.1 기술적 배움
--------------------------------------------------------------------------------

본 프로젝트를 통해 OpenGL의 전반적인 파이프라인을 깊이 이해할 수 있었습니다.
특히 다음 부분에서 많은 성장이 있었습니다:

- 쉐이더 프로그래밍: GPU에서 실행되는 코드를 작성하면서 병렬 처리의
  중요성을 배웠습니다.

- 좌표계 변환: 로컬 좌표계, 월드 좌표계, 뷰 좌표계, 클립 좌표계의
  변환 과정을 직접 구현하며 3D 그래픽스의 수학적 기초를 다졌습니다.

- 조명 모델: Phong Shading을 직접 구현하면서 빛의 물리적 특성을
  시뮬레이션하는 방법을 배웠습니다.

- 성능 최적화: 30개의 조명 중 4개만 활성화하는 등 실시간 렌더링을 위한
  최적화 기법을 적용했습니다.


7.2 협업 경험
--------------------------------------------------------------------------------

Git을 활용한 버전 관리와 코드 리뷰를 통해 팀 프로젝트 경험을 쌓았습니다.
각자의 역할을 분담하되 자주 소통하며 통합하는 과정에서 협업의 중요성을
깨달았습니다.


7.3 어려웠던 점과 해결 과정
--------------------------------------------------------------------------------

[문제 1] 자동차 회전 시 위치 이탈
- 원인: 월드 좌표계 기준 회전
- 해결: 회전 행렬에 이동 성분을 직접 포함시켜 로컬 좌표계 회전 구현

[문제 2] 조명이 너무 어두움
- 원인: 법선 벡터가 잘못 계산됨
- 해결: 각 면마다 정확한 법선 벡터 할당

[문제 3] 키 동시 입력 불가
- 원인: 이벤트 기반 입력 처리
- 해결: 키 상태 배열 + 타이머 기반 업데이트로 전환

[문제 4] git add . 실패
- 원인: Windows 특수 파일 'nul'
- 해결: .gitignore에 nul 추가


7.4 향후 개선 방향
--------------------------------------------------------------------------------

시간 제약으로 구현하지 못했지만, 다음 기능들을 추가하면 더욱 완성도 높은
프로젝트가 될 것으로 생각됩니다:

1. 마우스를 통한 카메라 제어 (구면 좌표계 회전)
2. 여러 맵 레이아웃 (도시, 시골, 고속도로)
3. 충돌 감지 시스템
4. 미니맵 UI
5. 날씨 효과 (비, 안개)
6. 더 많은 차량 모델
7. AI 차량 (NPC)
8. 사운드 효과


7.5 마무리
--------------------------------------------------------------------------------

이번 프로젝트를 통해 단순히 API를 사용하는 것을 넘어, 3D 그래픽스의
기본 원리와 실시간 렌더링 기술을 깊이 이해할 수 있었습니다.

특히 수업에서 배운 이론(MVP 변환, 조명 모델, 쉐이더 등)을 직접 구현하며
확실하게 체득할 수 있었던 점이 가장 큰 수확이었습니다.

OpenGL이라는 강력한 도구를 활용하여 실시간 3D 애플리케이션을 만드는
경험은 앞으로 게임 개발이나 시각화 분야로 나아가는 데 큰 자산이
될 것이라 확신합니다.


================================================================================
                              프로젝트 개발팀

                    GitHub: kyonghwa1916/OpenGL_Termproject
================================================================================
